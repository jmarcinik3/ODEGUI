mhsinf: # (in)activation parameter equilibrium
  properties: [Dependent]
  variables: Vm
  arguments:
    parameters: [Vhalf,dV,mhsmin,mhsmax,mhsorder]
  form: mhsmin + (mhsmax-mhsmin) / (1+exp(-(Vm-Vhalf)/dV))**mhsorder
mhstau: # (in)activation parameter time constant
  properties: [Dependent]
  variables: Vm
  arguments:
    parameters: [Vtau,dVtau,tauVtau,tauinf,tauorder]
  form: tauinf + (tauVtau-tauinf)*exp(-((Vm-Vtau)/dVtau)**tauorder)
dmhs: # (in)activation parameter derivative
  properties: [Dependent]
  arguments:
    variables: mhs
    parameters: [Vhalf,dV,mhsmin,mhsmax,mhsorder,Vtau,dVtau,tauVtau,tauinf,tauorder]
  children:
    mhsinf:
      parameters: [Vhalf,dV,mhsmin,mhsmax,mhsorder]
    mhstau:
      parameters: [Vtau,dVtau,tauVtau,tauinf,tauorder]
  form: (mhsinf-mhs) / mhstau

gBKS: # conductance for BKS channel
  properties: [Independent]
  variables: [pO2,pO3]
  parameters: [PBKS,zK,Ksomain,Ksomaex]
  children:
    gGHK:
      parameters: [PBKS,zK,Ksomain,Ksomaex]
  form: (pO2+pO3) * gGHK
gBKT: # conductance for BKT channel
  properties: [Independent]
  variables: [pO2,pO3]
  parameters: [PBKT,zK,Ksomain,Ksomaex]
  children:
    gGHK:
      parameters: [PBKT,zK,Ksomain,Ksomaex]
  form: (pO2+pO3) * gGHK
gK1f: # conductance for K1f channel
  properties: [Independent]
  variables: mK1f
  parameters: gK1f1
  form: gK1f1 * mK1f
gK1s: # conductance for K1s channel
  properties: [Independent]
  variables: mK1s
  parameters: gK1s1
  form: gK1s1 * mK1s

IBKS: # current for BKS channel
  properties: [Independent]
  parameters: EBKS
  children:
    gBKS:
    I:
      parameters: EBKS
      functions: gBKS
  form: I
IBKT: # current for BKT channel
  properties: [Independent]
  parameters: EBKT
  children:
    gBKT:
    I:
      parameters: EBKT
      functions: gBKT
  form: I
IBK: # current for BK channel
  properties: [Independent]
  children:
    IBKS:
    IBKT:
  form: IBKS + IBKT

IK1f: # current for K1f channel
  properties: [Independent]
  parameters: EK1f
  children:
    gK1f:
    I:
      parameters: EK1f
      functions: gK1f
  form: I
IK1s: # current for K1s channel
  properties: [Independent]
  parameters: EK1s
  children:
    gK1s:
    I:
      parameters: EK1s
      functions: gK1s
  form: I
IK1: # current for K1 channel
  properties: [Independent]
  parameters: aK1f
  children:
    IK1f:
    IK1s:
  form: aK1f*IK1f + (1-aK1f)*IK1s

dhBKT: # BKT channel inactivation
  properties: [Derivative, Independent]
  variable: hBKT
  variables: hBKT
  parameters: [VhalfBKT,dVBKT,mhminBKT,mhmaxBKT,deltaBKT,VtauBKT,dVtauBKT,tauVtauBKT,tauinfBKT,deltatauBKT]
  children:
    dmhs:
      variables: hBKT
      parameters: [VhalfBKT,dVBKT,mhminBKT,mhmaxBKT,deltaBKT,VtauBKT,dVtauBKT,tauVtauBKT,tauinfBKT,deltatauBKT]
  form: dmhs

dmK1flt: # K1f channel activation for small soma potential
  properties: [Independent]
  parameters: [VhalfK1f,dVK1f,mhminK1f,mhmaxK1f,deltaK1f,VtauK1flt,dVtauK1flt,tauVtauK1flt,tauinfK1flt,deltatauK1f]
  children:
    dmhs:
      variables: mK1f
      parameters: [VhalfK1f,dVK1f,mhminK1f,mhmaxK1f,deltaK1f,VtauK1flt,dVtauK1flt,tauVtauK1flt,tauinfK1flt,deltatauK1f]
  form: dmhs
dmK1fgt: # K1f channel activation for large soma potential
  properties: [Independent]
  parameters: [VhalfK1f,dVK1f,mhminK1f,mhmaxK1f,deltaK1f,VtauK1fgt,dVtauK1fgt,tauVtauK1fgt,tauinfK1fgt,deltatauK1f]
  children:
    dmhs:
      variables: mK1f
      parameters: [VhalfK1f,dVK1f,mhminK1f,mhmaxK1f,deltaK1f,VtauK1fgt,dVtauK1fgt,tauVtauK1fgt,tauinfK1fgt,deltatauK1f]
  form: dmhs
dmK1f: # K1f channel activation
  properties: [Piecewise, Derivative, Independent]
  variable: mK1f
  variables: Vm
  parameters: EK1f
  pieces: [dmK1flt, dmK1fgt]
  conditions: [Vm<EK1f, Vm>=EK1f]

dmK1slt: # K1s channel activation for small soma potential
  properties: [Independent]
  variable: mK1s
  parameters: [VhalfK1s,dVK1s,mhminK1s,mhmaxK1s,deltaK1s,VtauK1slt,dVtauK1slt,tauVtauK1slt,tauinfK1slt,deltatauK1s]
  children:
    dmhs:
      variables: mK1s
      parameters: [VhalfK1s,dVK1s,mhminK1s,mhmaxK1s,deltaK1s,VtauK1slt,dVtauK1slt,tauVtauK1slt,tauinfK1slt,deltatauK1s]
  form: dmhs
dmK1sgt: # K1s channel activation for large soma potential
  properties: [Independent]
  variable: mK1s
  parameters: [VhalfK1s,dVK1s,mhminK1s,mhmaxK1s,deltaK1s,VtauK1sgt,dVtauK1sgt,tauVtauK1sgt,tauinfK1sgt,deltatauK1s]
  children:
    dmhs:
      variables: mK1s
      parameters: [VhalfK1s,dVK1s,mhminK1s,mhmaxK1s,deltaK1s,VtauK1sgt,dVtauK1sgt,tauVtauK1sgt,tauinfK1sgt,deltatauK1s]
  form: dmhs
dmK1s: # K1s channel activation
  properties: [Piecewise, Derivative, Independent]
  variable: mK1s
  variables: Vm
  parameters: EK1s
  pieces: [dmK1slt, dmK1sgt]
  conditions: [Vm<EK1s, Vm>=EK1s]



